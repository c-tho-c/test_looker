!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.vizObject=n():e.vizObject=n()}(self,()=>(()=>{"use strict";var e={d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const t={id:"kpi_viz",label:"KPI Blocks",options:{title_font_size:{type:"number",label:"Title Font Size",default:14,section:"Style"},value_font_size:{type:"number",label:"Value Font Size",default:48,section:"Style"},subtitle_font_size:{type:"number",label:"Subtitle Font Size",default:13,section:"Style"},cards_per_row:{type:"number",label:"Cards Per Row",default:4,section:"Layout"},card_background:{type:"string",label:"Card Background Color",default:"#FFFFFF",display:"color",section:"Style"},title_color:{type:"string",label:"Title Color",default:"#374151",display:"color",section:"Style"},value_color:{type:"string",label:"Value Color",default:"#111827",display:"color",section:"Style"},positive_color:{type:"string",label:"Positive Trend Color",default:"#10B981",display:"color",section:"Style"},negative_color:{type:"string",label:"Negative Trend Color",default:"#EF4444",display:"color",section:"Style"},show_trend:{type:"boolean",label:"Show Trend Indicators",default:!0,section:"Display"},show_icon:{type:"boolean",label:"Show Icons",default:!0,section:"Display"}},create(e,n){e.innerHTML='\n      <style>\n        .kpi-container {\n          display: grid;\n          gap: 20px;\n          padding: 20px;\n          background: #F3F4F6;\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;\n        }\n        \n        .kpi-card {\n          background: white;\n          border-radius: 12px;\n          padding: 24px;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n          transition: all 0.2s ease;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .kpi-card:hover {\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n          transform: translateY(-2px);\n        }\n        \n        .kpi-header {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          margin-bottom: 12px;\n        }\n        \n        .kpi-icon {\n          width: 24px;\n          height: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: #EEF2FF;\n          border-radius: 6px;\n          padding: 4px;\n        }\n        \n        .kpi-title {\n          font-weight: 500;\n          color: #374151;\n          margin: 0;\n        }\n        \n        .kpi-value {\n          font-weight: 700;\n          color: #111827;\n          margin: 8px 0;\n          line-height: 1;\n        }\n        \n        .kpi-trend {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          font-size: 13px;\n          font-weight: 600;\n          margin-top: 8px;\n        }\n        \n        .kpi-trend.positive {\n          color: #10B981;\n        }\n        \n        .kpi-trend.negative {\n          color: #EF4444;\n        }\n        \n        .kpi-trend .arrow {\n          font-size: 16px;\n        }\n        \n        .kpi-subtitle {\n          color: #6B7280;\n          font-size: 13px;\n          margin-top: 4px;\n        }\n      </style>\n      <div class="kpi-container"></div>\n    '},updateAsync(e,n,t,o,i,l){if(!o||!o.fields)return n.innerHTML='<div style="padding: 20px; color: #EF4444;">No query results available</div>',void l();const r=o.fields,a=r.measures||[],s=r.dimensions||[];if(0===a.length)return n.innerHTML='<div style="padding: 20px; color: #EF4444;">This visualization requires at least one measure</div>',void l();const d=t.cards_per_row||4,p=!1!==t.show_trend,c=!1!==t.show_icon,u=n.querySelector(".kpi-container");u.style.gridTemplateColumns=`repeat(${d}, 1fr)`,u.innerHTML="",a.forEach((n,o)=>{const i=document.createElement("div");i.className="kpi-card";const l=e[0]&&e[0][n.name]?e[0][n.name].value:0,r=e[0]&&e[0][n.name]&&e[0][n.name].rendered?e[0][n.name].rendered:l;let d=null,f="";const y=n.name+"_change";a.find(e=>e.name===y)&&e[0]&&e[0][y]&&(d=e[0][y].value,f=e[0][y].rendered||`${d}%`);let v="";if(s.length>0&&e[0]){const n=s[0];v=e[0][n.name]?e[0][n.name].value:""}const b={employee:"ðŸ‘¥",review:"ðŸ“‹",score:"ðŸ“Š",pending:"â³",performer:"â­",performance:"ðŸ“ˆ",revenue:"ðŸ’°",profit:"ðŸ’µ",customer:"ðŸ‘¤",order:"ðŸ›’",default:"ðŸ“Š"},g=(e=>{const n=e.toLowerCase();for(const e in b)if(n.includes(e))return b[e];return b.default})(n.label||n.name);let m=`\n        <div class="kpi-header">\n          ${c?`<div class="kpi-icon">${g}</div>`:""}\n          <h3 class="kpi-title" style="font-size: ${t.title_font_size||14}px; color: ${t.title_color||"#374151"}">\n            ${n.label||n.name}\n          </h3>\n        </div>\n        <div class="kpi-value" style="font-size: ${t.value_font_size||48}px; color: ${t.value_color||"#111827"}">\n          ${r}\n        </div>\n      `;if(p&&null!==d){const e=d>=0,n=e?"â†‘":"â†“";m+=`\n          <div class="kpi-trend ${e?"positive":"negative"}" style="color: ${e?t.positive_color||"#10B981":t.negative_color||"#EF4444"}">\n            <span class="arrow">${n}</span>\n            <span>${f}</span>\n          </div>\n        `}v&&(m+=`\n          <div class="kpi-subtitle" style="font-size: ${t.subtitle_font_size||13}px">\n            ${v}\n          </div>\n        `),i.innerHTML=m,i.style.background=t.card_background||"#FFFFFF",u.appendChild(i)}),l()}};looker.plugins.visualizations.add(t);const o=t;return n})());
//# sourceMappingURL=kpi_viz.js.map